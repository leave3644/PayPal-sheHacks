{"version":3,"sources":["webpack:///webpack/bootstrap e4d770359804869b457c","webpack:///./src/loader/component.js","webpack:///./src/loader/config.js","webpack:///./src/loader/index.js","webpack:///./src/loader/interface.js","webpack:///./src/loader/load.js","webpack:///./src/loader/responder.js","webpack:///./src/loader/util.js","webpack:///./src/namespace.js"],"names":["isXComponent","getVersion","isLatest","Boolean","window","name","split","name_separator","xcomponent","Error","replace","version","major_version","latest_version","config","checkoutjs_url","xchild_global","script_props","module","exports","require","onLoadCheckoutIntegration","callback","listen","integrationResponder","getIntegrationURLs","latest","major","minor","getIntegrationProps","props","query","env","stage","loadCheckoutIntegration","urls","err","result","Date","now","stack","toString","respond","responder","callbacks","loaded","res","flush","length","shift","call","error","push","loadScript","warn","parseQuery","url","prop","attrs","container","document","body","head","script","createElement","src","onload","onerror","Object","keys","attr","setAttribute","appendChild","message","Array","prototype","slice","arguments","join","console","log","queryString","location","search","params","indexOf","pair","decodeURIComponent","extendPayPalNamespace","xports","paypal","PAYPAL","namespace","apps","ppxo"],"mappings":"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","file":"checkout.child.loader.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/loader/index.js\");\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e4d770359804869b457c","/* @flow */\n\nimport { config } from './config';\n\nexport function isXComponent() : boolean {\n    return Boolean(window.name && window.name.split(config.name_separator)[0] === config.xcomponent);\n}\n\nexport function getVersion() : string {\n\n    if (!isXComponent()) {\n        throw new Error(`Can not get version for non-xcomponent`);\n    }\n\n    return window.name.split(config.name_separator)[2].replace(/_/g, '.');\n}\n\nexport function isLatest() : boolean {\n\n    if (!isXComponent()) {\n        return false;\n    }\n\n    let version = getVersion();\n\n    return Boolean(version === config.major_version || version === config.latest_version);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/loader/component.js","/* @flow */\n\nexport let config = {\n    checkoutjs_url: 'https://www.paypalobjects.com/api/checkout{version}.js',\n    major_version:  '4',\n    latest_version: 'latest',\n    xcomponent:     'xcomponent',\n    xchild_global:  'xchild',\n    name_separator: '__',\n\n    script_props: {\n        'data-paypal-checkout': '',\n        'data-no-bridge': '',\n        'data-state': 'ppxo_checkout'\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/loader/config.js","/* @flow */\n\nimport { extendPayPalNamespace } from '../namespace';\n\nmodule.exports = module.exports.default = extendPayPalNamespace(require('./interface'));\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/loader/index.js","/* @flow */\n\nimport { integrationResponder } from './load';\n\nexport function onLoadCheckoutIntegration(callback : (err : ?Error, result : ?mixed) => void) : void {\n    return integrationResponder.listen(callback);\n}\n\nmodule.exports.default = module.exports;\n\n\n\n// WEBPACK FOOTER //\n// ./src/loader/interface.js","/* @flow */\n\nimport { config } from './config';\nimport { responder } from './responder';\nimport { isLatest, getVersion, isXComponent } from './component';\nimport { loadScript, warn, parseQuery } from './util';\n\nexport let integrationResponder = responder();\n\nfunction getIntegrationURLs() : { latest : boolean, major : string, minor : string } {\n\n    return {\n        latest: isLatest(),\n        major:  config.checkoutjs_url.replace('{version}', ''),\n        minor:  config.checkoutjs_url.replace('{version}', `.${getVersion()}`)\n    };\n}\n\nfunction getIntegrationProps() : Object {\n\n    let props = { ...config.script_props };\n\n    let query = parseQuery();\n\n    if (query.env) {\n        props['data-env'] = query.env;\n    }\n\n    if (query.stage) {\n        props['data-stage'] = query.stage;\n    }\n\n    return props;\n}\n\nfunction loadCheckoutIntegration(callback : (err : ?Error, result : ?mixed) => void) : void {\n\n    if (!isXComponent()) {\n        return callback(null, null);\n    }\n\n    let urls = getIntegrationURLs();\n    let props = getIntegrationProps();\n\n    loadScript(urls.latest ? urls.major : urls.minor, config.xchild_global, props, (err, result) => {\n\n        if (err && !urls.latest) {\n            return loadScript(`${urls.major}?t=${Date.now()}`, config.xchild_global, props, callback);\n        }\n\n        return callback(err, result);\n    });\n}\n\nloadCheckoutIntegration((err : ?Error, result : ?mixed) : void => {\n\n    if (err) {\n        warn('Failed to load checkout.js', err.stack || err.toString());\n    }\n\n    if (err || result) {\n        return integrationResponder.respond(err, result);\n    }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/loader/load.js","/* @flow */\n\nexport function responder() : { respond : (error : ?Error, result : ?mixed) => void, listen : (callback : (error : ?Error, result : ?mixed) => void) => void } {\n\n    let callbacks = [];\n    let loaded = false;\n\n    let err;\n    let res;\n\n    function flush() {\n        if (loaded) {\n            while (callbacks.length) {\n                callbacks.shift().call(null, err, res);\n            }\n        }\n    }\n\n    function respond(error : ?Error, result : ?mixed) {\n\n        loaded = true;\n        err    = error;\n        res    = result;\n\n        flush();\n    }\n\n    function listen(callback : (error : ?Error, result : ?mixed) => void) {\n        callbacks.push(callback);\n        flush();\n    }\n\n    return { respond, listen };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/loader/responder.js","/* @flow */\n\nexport function loadScript(url : string, prop : string, attrs : Object, callback : (err : ?Error, res : ?mixed) => void) : void {\n\n    if (window[prop]) {\n        return callback(null, window[prop]);\n    }\n\n    let container = document.body || document.head;\n\n    if (!container) {\n        return callback(new Error(`Can not find container to insert script into`));\n    }\n\n    let script = document.createElement('script');\n\n    script.src = url;\n\n    script.onload = () => {\n        if (!window[prop]) {\n            return callback(new Error(`Expected ${prop} to be present on window`));\n        }\n\n        return callback(null, window[prop]);\n    };\n\n    script.onerror = (err : Error) => {\n        return callback(err);\n    };\n\n    for (let attr of Object.keys(attrs)) {\n        script.setAttribute(attr, attrs[attr]);\n    }\n\n    container.appendChild(script);\n}\n\nexport function warn() {\n    let message = Array.prototype.slice.call(arguments).join(' ');\n\n    if (window.console && window.console.warn) {\n        window.console.warn(message);\n    } else if (window.console && window.console.log) {\n        window.console.log(message);\n    }\n}\n\nexport function parseQuery(queryString : string = window.location.search) : Object {\n\n    let params = {};\n\n    if (queryString && queryString.indexOf('?') === 0) {\n        queryString = queryString.slice(1);\n    }\n\n    if (!queryString) {\n        return params;\n    }\n\n    if (queryString.indexOf('=') === -1) {\n        throw new Error(`Can not parse query string params: ${queryString}`);\n    }\n\n    for (let pair of queryString.split('&')) {\n        pair = pair.split('=');\n\n        if (pair[0] && pair[1]) {\n            params[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n        }\n    }\n\n    return params;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/loader/util.js","/* @flow */\n\nexport function extendPayPalNamespace(xports : Object) : Object {\n\n    for (let namespace of [ window.paypal, window.PAYPAL ]) {\n\n        if (!namespace) {\n            continue;\n        }\n\n        let apps = xports.apps;\n\n        if (namespace.apps) {\n            apps = { ...namespace.apps, ...apps };\n        }\n\n        xports = { ...namespace, ...xports, apps };\n    }\n\n    window.paypal = xports;\n    window.PAYPAL = xports;\n    window.ppxo = xports;\n\n    return xports;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/namespace.js"],"sourceRoot":""}